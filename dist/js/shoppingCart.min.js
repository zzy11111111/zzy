let trun={convertStrToObj(t){return t?JSON.parse(t):{}}};class Cart{constructor(){this.cart=document.querySelector(".cartbox"),this.selectAll=document.querySelector("#selectAll"),this.flag=!0,this.init()}init(){let o=this,t=window.localStorage;var n,e=t.getItem("products")?t.getItem("products"):"",l=trun.convertStrToObj(e);for(n in l){var r=l[n];let t=document.createElement("ul");t.className="buy",t.setAttribute("data-good-id",n),t.innerHTML=`<li>
            <div class="input"><input type="checkbox" class="selectOne"></div>
            <div class="img"> <img src="${r.src}" alt="">
                <div class="productInformation">
                    <div class="set">${r.set}</div>
                    <div class="name">${r.name}</div>
                </div>
            </div>
            <div class="price">￥${r.price}</div>
            <div class="num">
                <div class="border">
                    <a href="javascript:;"><div class="minus">-</div></a>
                    <input type="text" class="number" value="${r.num}">
                    <a href="javascript:;"> <div class="plus">+</div></a>       
                </div>
            </div>
            <div class="del">删除</div>
        </li>`;r=t.getAttribute("data-good-id");let e=document.querySelector(".total");e.innerText="合计：￥"+l[r].price*l[r].num,this.cart.appendChild(t)}let c=document.querySelectorAll(".minus");for(let t=0,e=c.length;t<e;t++)c[t].onclick=function(){let t=document.querySelector(".buy");var e=t.getAttribute("data-good-id");let o=window.localStorage;var n=o.getItem("products")?o.getItem("products"):"";let l=trun.convertStrToObj(n),r=(1<l[e].num&&l[e].num--,o.setItem("products",JSON.stringify(l)),this.parentNode.nextElementSibling.value=l[e].num,document.querySelector(".total"));r.innerText="合计：￥"+l[e].price*l[e].num};let i=document.querySelectorAll(".plus");for(let t=0,e=i.length;t<e;t++)i[t].onclick=function(){let t=document.querySelector(".buy");var e=t.getAttribute("data-good-id");let o=window.localStorage;var n=o.getItem("products")?o.getItem("products"):"";let l=trun.convertStrToObj(n),r=(l[e].num++,o.setItem("products",JSON.stringify(l)),this.parentNode.previousElementSibling.value=l[e].num,document.querySelector(".total"));r.innerText="合计：￥"+l[e].price*l[e].num};let d=document.querySelectorAll(".border>input");for(let t=0,e=d.length;t<e;t++)d[t].onblur=function(){let t=document.querySelector(".buy");var e=t.getAttribute("data-good-id");let o=window.localStorage;var n=o.getItem("products")?o.getItem("products"):"";let l=trun.convertStrToObj(n);n=this.value;/^\d+$/.test(n)&&0<n?l[e].num=n:l[e].num=1,o.setItem("products",JSON.stringify(l)),this.value=l[e].num;let r=document.querySelector(".total");r.innerText="合计：￥"+l[e].price*l[e].num};let s=document.querySelectorAll(".del");for(let t=0,e=s.length;t<e;t++)s[t].onclick=function(){let t=document.querySelector(".buy");var e=t.getAttribute("data-good-id");let o=window.localStorage;var n=o.getItem("products")?o.getItem("products"):"";let l=trun.convertStrToObj(n),r=(delete l[e],o.setItem("products",JSON.stringify(l)),this.parentNode.parentNode.remove(),document.querySelector(".total"));r.innerText="合计：￥"};this.selectAll.onclick=function(){var t=document.querySelectorAll(".selectOne");if(o.flag){for(var e=0;e<t.length;e++)t[e].checked=!0;o.flag=!1}else{for(e=0;e<t.length;e++)t[e].checked=!1;o.flag=!0}}}}new Cart;var o_find=document.getElementById("find"),o_close=document.getElementById("btn-search-close"),topnav=document.querySelector(".top-scroll"),sav=document.querySelector(".search-box"),site=document.querySelector(".location");o_find.onclick=function(){document.getElementById("schbody").style.top="160px",window.onscroll=function(){100<parseInt(document.documentElement.scrollTop)?(sav.style.position="fixed",sav.style.top="32px"):parseInt(document.documentElement.scrollTop)<=100&&(sav.style.position="fixed",sav.style.top="160px")}},o_close.onclick=function(){document.getElementById("schbody").style.top="-640px",window.onscroll=null},window.addEventListener("scroll",function(t){170<window.pageYOffset?topnav.style.display="block":topnav.style.display="none"}),site.onclick=function(){location.href="https://ditu.amap.com/"};class Footer{constructor(){this.btn=document.querySelectorAll("footer .center .left .top ul li a"),this.box=document.querySelector("footer .center .left .hidden"),this.addEvent()}addEvent(){let o=this;for(let t=0,e=this.btn.length;t<e;t++)this.btn[t].onclick=function(){$(o.box).is(":hidden")?$(o.box).show(230):$(o.box).hide(230)}}}new Footer;